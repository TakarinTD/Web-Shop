<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <!-- =====  BASIC PAGE NEEDS  ===== -->
    <meta charset="utf-8">
    <title>Product Detail</title>
    <!-- =====  SEO MATE  ===== -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="distribution" content="global">
    <meta name="revisit-after" content="2 Days">
    <meta name="robots" content="ALL">
    <meta name="rating" content="8 YEARS">
    <meta name="Language" content="en-us">
    <meta name="GOOGLEBOT" content="NOARCHIVE">
    <!-- =====  MOBILE SPECIFICATION  ===== -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="viewport" content="width=device-width">
    <!-- =====  CSS  ===== -->
    <link rel="stylesheet" type="text/css" th:href="@{/css/font-awesome.min.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/magnific-popup.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/owl.carousel.css}">
    <link rel="shortcut icon" th:href="@{/images/favicon.jpg}">
</head>

<body onload="getAmountOfProductAvailable()">
<!-- =====  LOADER  ===== -->
<!--<div class="loader"></div>-->
<div class="wrapper">
    <th:block th:include="common/header"></th:block>
    <!-- =====  HEADER END  ===== -->
    <!-- =====  CONTAINER START  ===== -->
    <div class="container">
        <div class="row ">
            <div id="column-left" class="col-sm-4 col-lg-3 hidden-xs">
                <th:block th:include="common/category_menu"></th:block>
            </div>
            <div class="col-sm-8 col-lg-9 mtb_20">
                <div class="row mt_10 ">
                    <div class="col-md-6">
                        <th:block th:if="${product}" th:object="${product}">
                            <div>
                                <a class="thumbnails">
                                    <img data-name="product_image_detail"
                                         th:src="@{'/images/product/' + ${product.image}}" alt=""/>
                                </a>
                            </div>
                            <div id="product-thumbnail" class="owl-carousel">
                                <div class="item" th:each="item : ${images}">
                                    <div class="image-additional">
                                        <a th:attr="data-colorId=${item.getKey()}" class="thumbnail"
                                           th:href="@{'/images/product/' + ${item.getValue()}}" data-fancybox="group1">
                                            <img th:src="@{'/images/product/' + ${item.getValue()}}" alt=""/>
                                        </a>
                                    </div>
                                </div>

                            </div>
                        </th:block>
                    </div>
                    <div class="col-md-6 prodetail caption product-thumb" style="margin-top: 15px;">
                        <th:block th:if="${product}" th:object="${product}">
                            <h4 data-name="product_name" class="product-name"
                                th:attr="data-idProduct=${product.getId()}">
                                <a th:href="@{'/product/' + ${product.getId()} + '/detail'}"
                                   th:utext="*{productName}"></a>
                            </h4>
                            <div class="rating">
                                <label>Ratting :</label><label>4.5</label><label>/5</label>
                            </div>
                            <span class="price mb_20">
                                <th:block th:if="${product.getSalePriceDiscount() > 0}">
                                    <span style="font-size: 25px; line-height: 40px; margin-right: 8px;" class="amount"><span
                                            class="currencySymbol">$</span><span
                                            th:utext="${product.getSalePriceDiscount()}"></span></span>
                                    <span style="margin-right: 10px; text-decoration: line-through; font-size: 14px; line-height: 20px;"
                                          class="amount"><span class="currencySymbol">$</span><span
                                            th:utext="*{salePrice}"></span></span>
                                    <span style="font-size: 14px; line-height: 20px;"><span
                                            th:utext="*{promotion.getDiscount() * 100}"></span><span>%</span></span>
                                </th:block>
                                <th:block th:unless="${product.getSalePriceDiscount() > 0}">
                                    <span style="font-size: 25px; line-height: 40px; margin-right: 8px;" class="amount">
                                        <span class="currencySymbol">$</span>
                                        <span th:utext="*{salePrice}"></span>
                                    </span>
                                </th:block>
                        </span>
                            <hr>
                            <p class="product-desc mtb_30" th:utext="*{description}"></p>
                            <div id="product">
                                <div class="form-group">
                                    <div class="row">
                                        <div class="Sort-by col-md-6">
                                            <label>Chọn Màu : </label>
                                            <select name="product_color" id="select-by-color"
                                                    class="selectpicker form-control">
                                                <th:block th:if="${productColors}" th:each="item : ${productColors}">
                                                    <option th:value="${item.id}" th:utext="${item.colorName}"></option>
                                                </th:block>
                                            </select>
                                        </div>
                                        <div class="Color col-md-6">
                                            <label>Chọn kích cỡ : </label>
                                            <select name="product_size" id="select-by-size"
                                                    class="selectpicker form-control">
                                                <th:block th:if="${productSizes}" th:each="item : ${productSizes}">
                                                    <option th:value="${item.id}" th:utext="${item.sizeName}"></option>
                                                </th:block>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="qty mt_30 form-group2">
                                    <span>
                                        <label>Số lượng</label>
                                        <input name="product_quantity" min="1" max="10" value="1" type="number">
                                    </span>
                                    <span id="sold-out" style="margin-left: 20px;font-size: 15px;color: red;">Sản phẩm đã bán hết!</span>
                                </div>
                                <div id="quantity_available" class="qty mt_30 form-group2" style="display: none;">
                                    <label>Chỉ còn lại : </label>
                                    <span></span>
                                </div>
                                <div class="button-group mt_30">
                                    <button type="button" id="add-cart" class="add-to-cart"></button>
                                </div>
                            </div>
                        </th:block>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div id="exTab5" class="mtb_30">
                            <ul class="nav nav-tabs">
                                <li class="active"><a href="#1c" data-toggle="tab">Mô tả chi tiết</a></li>
                                <li><a href="#2c" data-toggle="tab">Nhận xet <span
                                        th:utext="${'(' + product.getReviews().size() + ')'}"></span></a></li>
                            </ul>
                            <div class="tab-content ">
                                <div class="tab-pane active" id="1c">
                                    <th:block th:if="${product}" th:object="${product}">
                                        <p th:utext="${product.getDescription()}"></p>
                                    </th:block>
                                </div>

                                <div class="tab-pane" id="2c">
                                    <form class="form-horizontal" th:action="@{/postReview}" method="post">
                                        <h4 class="mt_20 mb_30">Thêm bình luận của bạn</h4>
                                        <div class="btn-warning form-group required" id="lack-info-review" style="display: none;">
                                            <div class="col-sm-12">
                                                <p>Hãy nhập đầy đủ thông tin đánh giá !</p>
                                            </div>
                                        </div>
                                        <div class="form-group required">
                                            <div class="col-sm-12">
                                                <label class="control-label" for="title">Tiêu đề</label>
                                                <input id="title" name="title" class="form-control" type="text">
                                            </div>
                                        </div>
                                        <div class="form-group required">
                                            <div class="col-sm-12">
                                                <label class="control-label" for="comment">Nội dung</label>
                                                <textarea rows="5" id="comment" name="comment"
                                                          class="form-control"></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group required">
                                            <div class="col-md-6">
                                                <div class="rates">
                                                    <label>Rating</label>
                                                    <span style="color: red;">Bad</span>
                                                    <input name="ratting" value="1" type="radio">
                                                    <input name="ratting" value="2" type="radio">
                                                    <input name="ratting" value="3" type="radio">
                                                    <input name="ratting" value="4" type="radio">
                                                    <input name="ratting" value="5" type="radio">
                                                    <span style="color: #4cae4c">Good</span>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="buttons pull-right">
                                                    <button id="post-comment" type="button" class="btn btn-md btn-link">
                                                        Bình luận
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                    <th:block th:if="${product}">
                                        <div class="list-review" style="margin-top: 30px;">
                                            <h4>Các bình luận về sản phẩm</h4>
                                            <ul id="list-review-group" th:each="review : ${product.getReviews()}">
                                                <li class="review-item" th:attr="data-id_comment=${review.getId()}">
                                                    <div class="row" style="margin-top: 10px; margin-bottom: 10px;">
                                                        <div class="col-md-12">
                                                            <div class="review-item-detail"
                                                                 style="display: flex; flex-direction: column;">
                                                                <div class="review-user">
                                                                    <div style="float: left; border-radius: 10px;"
                                                                         class="review-avater">
                                                                        <img style="width: 40px;" th:src="@{/images/user-avatar.png}" alt="Image">
                                                                    </div>
                                                                    <div style="margin-left: 10px;float: left;">
                                                                        <h5 class="user-name"
                                                                            th:utext="${review.getUser().getFullName()}"></h5>
                                                                        <p class="comment-date"
                                                                           th:utext="${review.getCreatedAt()}"></p>
                                                                    </div>
                                                                    <div style="float: right">
                                                                        Đánh giá : <label class="ratting"
                                                                                          th:utext="${review.getRatting()}"></label><label>/5</label>
                                                                    </div>
                                                                </div>
                                                                <div class="review-des"
                                                                     style="margin-top: 10px; margin-left: 50px;">
                                                                    <div class="title">
                                                                        <p><strong
                                                                                th:utext="${review.getTitle()}"></strong>
                                                                        </p>
                                                                    </div>
                                                                    <div class="review-content">
                                                                        <span th:utext="${review.getComment()}"></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-12" style="padding-top: 10px;">
                                                            <div class="like-and-review">
                                                                <span class="like" style="padding: 8px 16px 9px; line-height: 20px; font-weight: 500;border-radius: 4px;
                                                                                            margin: 0px 8px 0px 0px;cursor: pointer;display: inline-block;">
                                                                    <i class="fa fa-thumbs-up"
                                                                       aria-hidden="true"></i><span>Like</span><span>(100)</span>
                                                                </span>
                                                                <span class="reply" style="padding: 8px 16px 9px; line-height: 20px; font-weight: 500;border-radius: 4px;
                                                                                            margin: 0px 8px 0px 0px;cursor: pointer;display: inline-block;">
                                                                    <i class="fa fa-reply" aria-hidden="true"></i><span>Trả lời</span>
                                                                </span>
                                                            </div>
                                                        </div>

                                                        <div th:attr="id=${'reply-review-' + review.getId()}"
                                                             class="col-md-12 reply-input"
                                                             style="margin-left: 25px; display: none;">
                                                            <div class="row">
                                                                <div class="form-group btn-warning" style="display: none;" id="lack-reply">
                                                                    <div class="col-md-12">
                                                                        <p>Hãy viết phản hồi của bạn </p>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <form th:action="@{/postReplyReview}"
                                                                  class="form-horizontal" method="post">
                                                                <div class="form-group required">
                                                                    <div class="col-sm-12">
                                                                        <textarea
                                                                                class="form-control reply-comment_input"
                                                                                type="text"
                                                                                placeholder="Viết câu trả lời"
                                                                                rows="2"></textarea>
                                                                    </div>
                                                                </div>
                                                                <div class="buttons pull-left">
                                                                    <button type="button"
                                                                            class="btn btn-md btn-link reply-comment__submit">
                                                                        Gửi
                                                                    </button>
                                                                </div>
                                                            </form>
                                                        </div>

                                                        <div th:attr="id=${'reply-items-review-' + review.getId()}"
                                                             class="col-md-12 review-comment_sub-comments_reply">
                                                            <th:block th:if="${review.getReplyReviewSet().size() > 0}">
                                                                <div class="view-reply-more"
                                                                     style="padding: 8px 16px 9px; cursor: pointer;">
                                                                    xem tất cả <span
                                                                        th:utext="${review.getReplyReviewSet().size()}"></span>
                                                                    câu trả lời
                                                                </div>
                                                                <div class="reply-item"
                                                                     style="margin-left: 8px; padding-top: 10px; padding-bottom: 20px; display: none;"
                                                                     th:each="reply : ${review.getReplyReviewSet()}">
                                                                    <hr style="width:50% ;margin-left:10px; padding-bottom: 8px;"/>
                                                                    <div class="info_reply-user"
                                                                         style="margin-left: 10px;">
                                                                        <span style="margin-right: 10px;"><img style="width: 40px;" th:src="@{/images/user-avatar.png}"
                                                                                                               alt="Image"></span>
                                                                        <span class="user-name"
                                                                              style="margin-right: 10px;"
                                                                              th:utext="${reply.getUser().getFullName()}"></span>
                                                                        <span class="comment-date"
                                                                              style="margin-right: 10px;"
                                                                              th:utext="${reply.getCreatedAt()}"></span>
                                                                    </div>
                                                                    <div class="reply-content" style="margin-left: 64px; margin-top: 5px;">
                                                                        <p th:utext="${reply.getContent()}"></p>
                                                                    </div>
                                                                </div>

                                                                <div class="view-reply-less"
                                                                     style="padding: 8px 16px 9px; cursor: pointer; display: none;">
                                                                    Ẩn <span
                                                                        th:utext="${review.getReplyReviewSet().size()}"></span>
                                                                    câu trả lời
                                                                </div>
                                                            </th:block>
                                                        </div>
                                                    </div>
                                                </li>
                                                <hr style="height:2px;border-width:0;color:gray;background-color:gray"/>
                                            </ul>
                                        </div>
                                    </th:block>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- =====  CONTAINER END  ===== -->
    <th:block th:include="common/footer"></th:block>
    <!-- =====  FOOTER END  ===== -->

    <div id="add-cart-dialog" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Sản phẩm đã được thêm vào giỏ hàng</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div id="err-dialog" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Đã có lỗi xảy ra</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div id="login-dialog" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Thông báo</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Bạn phải đăng nhập trước khi bình luận</p>
                </div>
                <div class="modal-footer">
                    <a th:href="@{/login}"><button type="button" class="btn btn-primary">Đăng nhập</button></a>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

</div>
<a id="scrollup"></a>
<script th:src="@{/js/jQuery_v3.1.1.min.js}"></script>
<script th:src="@{/js/owl.carousel.min.js}"></script>
<script th:src="@{/js/bootstrap.min.js}"></script>
<script th:src="@{/js/jquery.magnific-popup.js}"></script>
<script th:src="@{/js/custom.js}"></script>
<script th:inline="javascript">
    /*<![CDATA[*/
    $(document).ready(function () {
        $("#select-by-color").change(function () {
            let colorId = $("#select-by-color option:selected").val();
            let url_image = $("a[data-colorId='" + colorId + "']").attr("href");
            $("img[data-name='product_image_detail']").attr('src', url_image);
            getAmountOfProductAvailable();
        });

        $("#select-by-size").change(function () {
            getAmountOfProductAvailable();
        });

        $("#post-comment").click(function () {
            let url = $(this).closest("form").attr("action");
            let idUser = $('#user-session').attr('data-idUser');
            let title = $("input[id='title']").val();
            let comment = $("textarea[id='comment']").val();
            let ratting = $("input[name='ratting']:checked");
            if (idUser === "null") {
                $("#login-dialog").modal('show');
            } else if((title === "") || (comment === "") ) {
                $("#lack-info-review").show();
            }  else {
                let data = {
                    product: {
                        id: $("h4[data-name='product_name']").attr('data-idProduct')
                    },
                    user: {
                        id: idUser
                    },
                    title: title,
                    comment: comment,
                    ratting: ratting.val()
                }
                $.ajax({
                    url: url,
                    type: "POST",
                    data: JSON.stringify(data),
                    dataType: 'json',
                    contentType: "application/json",
                    success: function (result) {
                        let html = "<li class=\"review-item\" data-id_comment=\"" + result.id + "\">\n" +
                            "                                                    <div class=\"row\" style=\"margin-top: 10px; margin-bottom: 10px;\">\n" +
                            "                                                        <div class=\"col-md-12\">\n" +
                            "                                                            <div class=\"review-user\">\n" +
                            "                                                                <div style=\"float: left; border-radius: 10px;\" class=\"review-avater\">\n" +
                            "                                                                    <img style=\"width: 40px;\" src=\"/images/user-avatar.png\" alt=\"Image\">\n" +
                            "                                                                </div>\n" +
                            "                                                                <div style=\"margin-left: 10px;float: left;\">\n" +
                            "                                                                    <h5 class=\"user-name\">" + result.user.fullName + "</h5>\n" +
                            "                                                                    <p class=\"comment-date\">" + result.createdAt + "</p>\n" +
                            "                                                                </div>\n" +
                            "                                                                <div style=\"float: right\">\n" +
                            "                                                                    Đánh giá : <label class=\"ratting\">" + result.ratting + "</label><label>/5</label>\n" +
                            "                                                                </div>\n" +
                            "                                                            </div>\n" +
                            "                                                        </div>\n" +
                            "                                                        <div class=\"col-md-12\">\n" +
                            "                                                            <div class=\"review-des\" style=\"margin-left: 8px;margin-top: 10px;\">\n" +
                            "                                                                <div  class=\"title\"><p><strong>" + result.title + "</strong></p></div>\n" +
                            "                                                                <div class=\"review-content\">\n" +
                            "                                                                    <span>" + result.comment + "</span>\n" +
                            "                                                                </div>\n" +
                            "                                                            </div>\n" +
                            "                                                        </div>\n" +
                            "                                                    </div>\n" +
                            "                                                </li>\n" +
                            "<hr style=\"height:2px;border-width:0;color:gray;background-color:gray\"/>";

                        $("#lack-info-review").hide();
                        $(html).delay(1000).prependTo("#list-review-group").hide().slideDown().fadeIn();
                    },
                    error: function (e) {
                        $("#err-dialog").modal('show');
                    }
                });
            }
        });

        $("button.reply-comment__submit").click(function () {
            let url = $(this).closest("form").attr("action");
            let idUser = $('#user-session').attr('data-idUser');
            let idReview = $(this).closest("li").attr("data-id_comment");
            let content = $(this).closest("form").find("textarea.reply-comment_input").val();
            if (idUser === "null") {
                $("#login-dialog").modal('show');
            } else if(content === "") {
                $("#lack-reply").show();
            }
            else {
                let data = {
                    review: {
                        id: idReview
                    },
                    user: {
                        id: idUser
                    },
                    content: content
                }
                $.ajax({
                    url: url,
                    type: "POST",
                    data: JSON.stringify(data),
                    dataType: 'json',
                    contentType: "application/json",
                    success: function (result) {
                        $("div.reply-input").hide();
                        let html = "<div class=\"reply-item\" style=\"margin-left: 30px; padding-top: 10px; padding-bottom: 20px;\">\n" +
                            "                                                                <hr style=\"width:50% ;margin-left:10px; padding-bottom: 8px;\"/>\n" +
                            "                                                                    <div class=\"info_reply-user\" style=\"margin-left: 10px;\">\n" +
                            "                                                                        <span style=\"margin-right: 10px;\"><img src=\"/images/user-avatar.png\" alt=\"Image\"></span>\n" +
                            "                                                                        <span class=\"user-name\" style=\"margin-right: 10px;\">" + result.user.fullName + "</span>\n" +
                            "                                                                        <span class=\"comment-date\" style=\"margin-right: 10px;\">" + result.createdAt + "</span>\n" +
                            "                                                                    </div>\n" +
                            "                                                                    <div class=\"reply-content\" style=\"margin-left: 64px; margin-top: 5px;\">\n" +
                            "                                                                        <p>" + result.content + "</p>\n" +
                            "                                                                    </div>\n" +
                            "                                                                </div>";
                        $("#lack-reply").show();
                        $(html).delay(1000).prependTo("#reply-items-review-" + idReview).hide().slideDown().fadeIn();
                    },
                    error: function (e) {
                        $("#err-dialog").modal('show');
                    }
                });
            }
        });

        $("div.view-reply-more").click(function () {
            $(this).hide();
            $(this).nextAll(".reply-item").show();
            $(this).parent().find(".view-reply-less").show();
        });

        $("div.view-reply-less").click(function () {
            $(this).hide();
            $(this).prevAll(".reply-item").hide();
            $(this).parent().find(".view-reply-more").show();
        });

        $(".reply").click(function () {
            let idUser = $('#user-session').attr('data-idUser');
            if (idUser === "null") {
                $("#login-dialog").modal('show');
            } else {
                let idReview = $(this).closest("li").attr("data-id_comment");
                $("#reply-review-" + idReview).show();
            }
        });

        $("#add-cart").click(function () {
            let data = {
                productId: [[${product.getId()}]],
                productColorId: $("#select-by-color option:selected").val(),
                productSizeId: $("#select-by-size option:selected").val(),
                quantity: $("input[name='product_quantity']").val()
            };
            $.ajax({
                url: "/cart/addCart",
                type: "GET",
                data: data,
                dataType: 'json',
                success: function (result) {
                    if (result.cartSize > 0) {
                        $("#add-cart-dialog ").find(".modal-body p").text("Sản phẩm đã được thêm vào giỏ hàng");
                        $("#add-cart-dialog").modal('show');
                        $("#cart-size").text("(" + result.cartSize + ")");
                        changeCartHeader(result.itemsCart, result.totalPay);
                    } else {
                        $("#add-cart-dialog ").find(".modal-body p").text("Số lượng không đủ đáp ứng");
                        $("#add-cart-dialog").modal('show');
                    }
                },
                error: function (XMLHttpRequest) {
                    $("#err-dialog").modal('show');
                }
            });
        });
    });

    function getAmountOfProductAvailable() {
        let data = {
            productId: [[${product.getId()}]],
            producColorId: $("#select-by-color option:selected").val(),
            productSizeId: $("#select-by-size option:selected").val()
        };
        $.ajax({
            url: "/product/getAmountOfProduct",
            type: "GET",
            data: data,
            dataType: 'json',
            success: function (quantity) {
                if (quantity > 0) {
                    $('#sold-out').css('display', 'none');
                    $('button[id="add-cart"]').prop('disabled', false);
                    if (quantity < 10) {
                        $('#quantity_available').css('display', 'block');
                        $('#quantity_available > span').text(quantity);
                    }
                    $('input[name="product_quantity"]').attr('max', quantity);
                } else {
                    $('#quantity_available').css('display', 'none');
                    $('#sold-out').css('display', 'inline');
                    $('input[name="product_quantity"]').attr('max', 0);
                    $('button[id="add-cart"]').prop('disabled', true);
                }
            },
            error: function (XMLHttpRequest) {
                $("#err-dialog").modal('show');
            }
        });
    }

    function changeCartHeader(itemsCart, totalPay) {
        let totalItemsPay = totalPay;
        console.log(itemsCart);

        $("#smal-cart-view").empty();
        let html = "<li>\n" +
            "                                    <table class=\"table table-striped\">";
        jQuery.each(itemsCart, function (index, item) {
            html += "<tr data_productdetail_header=\"" + item.productDetail.product.id + "\">\n" +
                "                                            <td class=\"text-center\">\n" +
                "                                                <a href=\"/product/" + item.productDetail.product.id + "/detail\">\n" +
                "                                                    <img src=\"/images/product/" + item.productDetail.image + "\" alt=\"iPod Classic\" title=\"iPod Classic\" style=\"width: 60px; max-height: 100%;\">\n" +
                "                                                </a>\n" +
                "                                            </td>\n" +
                "                                            <td class=\"text-left product-name\">\n" +
                "                                                <a href=\"/product/" + item.productDetail.product.id + "/detail\">" + item.productDetail.product.productName + "</a>\n";
            if(item.productDetail.product.salePriceDiscount == 0) {
                html += "<p>\n" +
                        "       <span><strong>Đơn giá : </strong></span>\n" +
                        "       <span class=\"text-right\">" + item.productDetail.product.salePrice + "<span>đ</span></span>\n" +
                        "   </p>\n";
            } else {
                html += "<p>\n" +
                        "        <span><strong>Đơn giá : </strong></span>\n" +
                        "        <span class=\"text-left\" style=\"color: red;\">" + item.productDetail.product.salePriceDiscount + "<span>đ</span></span>\n" +
                        "        <span class=\"text-right\" style=\"margin-left: 5px; text-decoration: line-through;\">" + item.productDetail.product.salePrice + "<span>đ</span></span>\n" +
                        "    </p>\n";
            }

            html +=    "                                        <p>\n" +
                "                                                    <span><strong>Màu sắc : </strong></span>\n" +
                "                                                    <span>" + item.productDetail.productColor.colorName + "</span>\n" +
                "                                                </p>\n" +
                "                                                <p>\n" +
                "                                                    <span><strong>Size : </strong></span><span>" + item.productDetail.productSize.sizeName + "</span>\n" +
                "                                                </p>\n" +
                "                                                <p>\n" +
                "                                                    <span><strong>Số lượng : </strong></span><span id=\"item-quantity-header\">" + item.quantitiesProduct + "</span>\n" +
                "                                                </p>\n" +
                "                                            </td>\n" +
                "                                        </tr>";
        });
        html += "</table>\n" +
            "</li>" +
            "<li>\n" +
            "                                    <table class=\"table\">\n" +
            "                                        <tbody>\n" +
            "                                        <tr>\n" +
            "                                            <td class=\"text-center\"><strong>Tạm tính:</strong></td>\n" +
            "                                            <td class=\"text-center\"><span id=\"total-items-pay-header\">" + totalItemsPay + "</span><span>đ</span></td>\n" +
            "                                        </tr>\n" +
            "                                        </tbody>\n" +
            "                                    </table>\n" +
            "</li>\n" +
            "<li>\n" +
            "                                    <div style=\"display:flex; justify-content: space-between;\">\n" +
            "                                        <a href=\"/cart\">\n" +
            "                                            <button class=\"btn pull-left mt_10\" type=\"button\">xem giỏ hàng</button>\n" +
            "                                        </a>\n" +
            "                                        <a href=\"/checkout\">\n" +
            "                                            <button class=\"btn pull-right mt_10\" type=\"button\">Checkout</button>\n" +
            "                                        </a>\n" +
            "                                    </div>\n" +
            "                                </li>"
        $("#smal-cart-view").append(html);
    }

    /*]]>*/
</script>
</body>

</html>